---
import Layout from '../layouts/Layout.astro';
import { Button } from '@/components/ui/button';
import { Card, CardContent } from '@/components/ui/card';
import { ArrowRight, Download, ExternalLink, Mail } from 'lucide-react';
---

<Layout title="Henrik's home">
  <main class="container mx-auto px-4 py-16 max-w-5xl">
    <!-- Hero Section -->
    <section class="mb-24 text-center">
      <h1 class="text-4xl font-bold mb-4">Hey üëã I am Henrik</h1>
      <p class="text-lg text-muted-foreground">
        I build and ship software products with the help of AI. Here's my journey and what I'm working on.
      </p>
    </section>

    <!-- Newsletter Signup -->
    <section class="mb-24">
      <div class="text-center mb-8">
        <h2 class="text-2xl font-bold mb-2">The Gen X Maker Newsletter</h2>
        <p class="text-muted-foreground">Weekly insights from starting over and becoming an AI-powered maker</p>
      </div>
      <div class="max-w-xl mx-auto">
        <form 
          id="newsletter-form" 
          class="flex gap-2"
        >
          <input 
            type="email" 
            name="email"
            placeholder="Enter your email address" 
            class="flex-1 h-10 px-4 rounded-md bg-background ring-1 ring-input"
            required
          />
          <Button 
            type="submit" 
            variant="default" 
            className="h-10"
            id="submit-button"
          >
            Subscribe
          </Button>
        </form>
        <p 
          id="form-message" 
          class="text-sm mt-2 text-center hidden"
        ></p>
        <p class="text-sm text-muted-foreground mt-2 text-center">
          No spam. Unsubscribe at any time.
        </p>
      </div>
    </section>

    <script>
      const form = document.getElementById('newsletter-form') as HTMLFormElement;
      const submitButton = document.getElementById('submit-button') as HTMLButtonElement;
      const messageElement = document.getElementById('form-message') as HTMLParagraphElement;

      if (form && submitButton && messageElement) {
        form.addEventListener('submit', async (event) => {
          event.preventDefault();
          
          const originalButtonText = submitButton.textContent || 'Subscribe';
          
          // Reset message
          messageElement.className = 'text-sm mt-2 text-center hidden';
          messageElement.textContent = '';
          
          // Show loading state
          submitButton.textContent = 'Subscribing...';
          submitButton.disabled = true;
          
          try {
            const formData = new FormData(form);
            const email = formData.get('email');
            console.log('Submitting email:', email); // Debug log
            
            const response = await fetch('/api/newsletter-subscribe', {
              method: 'POST',
              body: JSON.stringify({ email }),
              headers: {
                'Content-Type': 'application/json'
              }
            });
            
            console.log('Response status:', response.status); // Debug log
            const data = await response.json();
            console.log('Response data:', data); // Debug log
            
            // Show message
            messageElement.classList.remove('hidden');
            
            if (response.ok) {
              messageElement.className = 'text-sm mt-2 text-center text-green-600';
              messageElement.textContent = data.message;
              form.reset();
            } else {
              messageElement.className = 'text-sm mt-2 text-center text-red-600';
              messageElement.textContent = data.message || 'Failed to subscribe';
            }
          } catch (error) {
            console.error('Submission error:', error);
            messageElement.classList.remove('hidden');
            messageElement.className = 'text-sm mt-2 text-center text-red-600';
            messageElement.textContent = 'An error occurred. Please try again later.';
          } finally {
            // Reset button state
            submitButton.textContent = originalButtonText;
            submitButton.disabled = false;
          }
        });
      }
    </script>

    <!-- Dumb Things I've Built -->
    <section class="mb-24">
      <h2 class="text-2xl font-bold mb-6">Dumb Things I've Built</h2>
      <div class="space-y-8">
        <div class="flex items-start gap-4">
          <span class="text-xl">üöÄ</span>
          <div>
            <h3 class="font-semibold mb-2">TweetHunter Clone</h3>
            <p class="text-muted-foreground">Built and failed spectacularly. Learned a ton about Twitter API.</p>
          </div>
        </div>
        <div class="flex items-start gap-4">
          <span class="text-xl">üí°</span>
          <div>
            <h3 class="font-semibold mb-2">AI Meme Generator</h3>
            <p class="text-muted-foreground">Generated 1000+ memes. Nobody used it. Great learning experience!</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Current Focus -->
    <section class="mb-24">
      <h2 class="text-2xl font-bold mb-6">Current Focus</h2>
      <div class="space-y-8">
        <div class="flex items-start gap-4">
          <span class="text-xl">üéØ</span>
          <div>
            <h3 class="font-semibold mb-2">Building revid.ai</h3>
            <p class="text-muted-foreground">Creating an AI-powered video generation platform for creators</p>
          </div>
        </div>
        <div class="flex items-start gap-4">
          <span class="text-xl">üìà</span>
          <div>
            <h3 class="font-semibold mb-2">Growing SuperX.so</h3>
            <p class="text-muted-foreground">Helping creators grow their Twitter presence</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Work with Me -->
    <section class="mb-24">
      <h2 class="text-2xl font-bold mb-6">Work with Me</h2>
      <div class="flex items-start gap-4">
        <span class="text-xl">ü§ù</span>
        <div>
          <p class="text-muted-foreground mb-4">I'm available for AI product consulting and technical advisory roles.</p>
          <Button asChild>
            <a href="mailto:your@email.com" class="inline-flex items-center gap-2">
              Get in Touch
              <Mail className="w-4 h-4" />
            </a>
          </Button>
        </div>
      </div>
    </section>

    <!-- Free Resources and Guides -->
    <section class="mb-24">
      <h2 class="text-2xl font-bold mb-6">Free Resources & Guides</h2>
      <div class="space-y-8">
        <div class="flex items-start gap-4">
          <span class="text-xl">üìö</span>
          <div>
            <h3 class="font-semibold mb-2">AI Product Launch Playbook</h3>
            <p class="text-muted-foreground mb-2">A step-by-step guide to launching AI products</p>
            <a href="#" class="inline-flex items-center gap-1 text-blue-500 hover:text-blue-600 font-medium">
              Download PDF
              <Download className="w-4 h-4" />
            </a>
          </div>
        </div>
        <div class="flex items-start gap-4">
          <span class="text-xl">üé•</span>
          <div>
            <h3 class="font-semibold mb-2">Video Creation Guide</h3>
            <p class="text-muted-foreground mb-2">Learn how to create viral short-form videos</p>
            <a href="#" class="inline-flex items-center gap-1 text-blue-500 hover:text-blue-600 font-medium">
              Read Guide
              <ArrowRight className="w-4 h-4" />
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- My Product Stack -->
    <section class="mb-24">
      <h2 class="text-2xl font-bold mb-6">My Product Stack</h2>
      <div class="space-y-6">
        <div class="flex items-start gap-4">
          <span class="text-xl">‚ö°</span>
          <div>
            <h3 class="font-semibold mb-1">
              Framework: 
              <a 
                href="https://astro.build" 
                target="_blank" 
                class="inline-flex items-center gap-1 text-blue-500 hover:text-blue-600"
              >
                Astro
                <ExternalLink className="w-4 h-4" />
              </a>
            </h3>
            <p class="text-sm text-muted-foreground">Build fast content-focused websites</p>
          </div>
        </div>
        <div class="flex items-start gap-4">
          <span class="text-xl">üé®</span>
          <div>
            <h3 class="font-semibold mb-1">UI Components: <a href="https://ui.shadcn.com" target="_blank" class="text-blue-500 hover:underline">shadcn/ui</a></h3>
            <p class="text-sm text-muted-foreground">Beautifully designed components built with Radix UI and Tailwind</p>
          </div>
        </div>
        <div class="flex items-start gap-4">
          <span class="text-xl">üéØ</span>
          <div>
            <h3 class="font-semibold mb-1">Styling: <a href="https://tailwindcss.com" target="_blank" class="text-blue-500 hover:underline">TailwindCSS</a></h3>
            <p class="text-sm text-muted-foreground">A utility-first CSS framework for rapid UI development</p>
          </div>
        </div>
        <div class="flex items-start gap-4">
          <span class="text-xl">‚ú®</span>
          <div>
            <h3 class="font-semibold mb-1">Icons: <a href="https://lucide.dev" target="_blank" class="text-blue-500 hover:underline">Lucide Icons</a></h3>
            <p class="text-sm text-muted-foreground">Beautiful & consistent icons for your UI</p>
          </div>
        </div>
        <div class="flex items-start gap-4">
          <span class="text-xl">üî∑</span>
          <div>
            <h3 class="font-semibold mb-1">Language: <a href="https://www.typescriptlang.org" target="_blank" class="text-blue-500 hover:underline">TypeScript</a></h3>
            <p class="text-sm text-muted-foreground">JavaScript with syntax for types</p>
          </div>
        </div>
      </div>
    </section>
  </main>
</Layout>
